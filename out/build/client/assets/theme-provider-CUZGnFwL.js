import{j as l}from"./jsx-runtime-D_zvdyIk.js";import{a as n}from"./chunk-OIYGIGL5-BjQr_l_M.js";const w={theme:"system",setTheme:()=>null},m=n.createContext(w);function x({children:s,defaultTheme:d="system",storageKey:r="vite-ui-theme",...h}){const[t,c]=n.useState(d);n.useEffect(()=>{if(!(typeof window>"u"))try{const e=window.localStorage.getItem(r);e&&c(e)}catch{}},[r]),n.useEffect(()=>{if(typeof window>"u")return;const e=window.document.documentElement,i=o=>{e.classList.remove("light","dark"),e.classList.add(o)};if(t==="system"){const o=window.matchMedia("(prefers-color-scheme: dark)");i(o.matches?"dark":"light");const a=f=>{t==="system"&&i(f.matches?"dark":"light")};return o.addEventListener?.("change",a),()=>o.removeEventListener?.("change",a)}i(t)},[t]);const u={theme:t,setTheme:e=>{if(typeof window<"u")try{window.localStorage.setItem(r,e)}catch{}c(e)}};return l.jsx(m.Provider,{...h,value:u,children:s})}const T=()=>{const s=n.useContext(m);if(s===void 0)throw new Error("useTheme must be used within a ThemeProvider");return s};export{x as T,T as u};

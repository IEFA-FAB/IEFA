import{j as e}from"./jsx-runtime-D_zvdyIk.js";import{a as r}from"./chunk-OIYGIGL5-BjQr_l_M.js";import{B as m}from"./badge-B95kivET.js";import{L as w,C as f}from"./label-DlsFJCEv.js";import{u as L,S as T,a as H,b as $,c as B,d as V}from"./useMessHalls-DOz8GpeU.js";import{C as z}from"./check-P3aSJU2R.js";import{c as E}from"./createLucideIcon-CwMMISn7.js";/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],R=E("map-pin",P),b=r.memo(({value:t,onChange:u,disabled:n=!1,hasDefaultMessHall:N,hasDefaultUnit:S,showValidation:l=!1,size:p="md",placeholder:v="Selecione um rancho..."})=>{const{messHalls:i}=L(),c=N??S??!1,d=r.useMemo(()=>{const s=(i??[]).find(j=>j.code===t),x=!!s,o=s?.name||t;return{selectedMessHall:s,isValidSelection:x,displayLabel:o}},[JSON.stringify(i),t]),g="w-full h-10 rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a=r.useMemo(()=>{const x={sm:"text-sm",md:"",lg:"text-lg"}[p],o=l&&!d.isValidSelection&&!!t;return{trigger:`${g} ${x}${c?" bg-accent/10":""}${o?" border-destructive/50 bg-destructive/10":""}`,label:`text-sm font-medium flex items-center justify-between ${n?"text-muted-foreground":"text-foreground"}`,container:"space-y-2",isInvalid:o}},[g,n,c,l,d.isValidSelection,t,p]),y=r.useCallback(s=>{n||s===t||u(s)},[n,t,u]),M=r.useMemo(()=>(i??[]).map(s=>e.jsx(T,{className:"cursor-pointer hover:bg-accent/50 focus:bg-accent/50 data-[state=checked]:bg-accent/60 data-[state=checked]:text-accent-foreground transition-colors",value:s.code,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:s.name??s.code}),t===s.code&&e.jsx(z,{className:"h-4 w-4 text-primary ml-2"})]})},s.code)),[JSON.stringify(i),t]),C=r.useMemo(()=>{const s=[];return c&&s.push(e.jsx(m,{variant:"secondary",className:"text-xs",children:"Padrão"},"default")),a.isInvalid&&s.push(e.jsx(m,{variant:"destructive",className:"text-xs",children:"Inválido"},"invalid")),s},[c,a.isInvalid]),{isInvalid:h}=a,{isValidSelection:I,displayLabel:k}=d;return e.jsxs("div",{className:a.container,children:[e.jsxs(w,{className:a.label,children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:"Rancho:"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[C,h&&e.jsx(f,{className:"h-4 w-4 text-destructive"})]})]}),e.jsxs(H,{value:t,onValueChange:y,disabled:n,children:[e.jsx($,{className:a.trigger,"aria-invalid":h,children:e.jsx(B,{placeholder:v,children:t&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{children:k}),c&&e.jsx(m,{variant:"secondary",className:"text-xs",children:"Padrão"})]})})}),e.jsxs(V,{className:"max-h-60",children:[e.jsx("div",{className:"p-2 text-xs text-muted-foreground border-b border-border",children:"Selecione o rancho responsável"}),M]})]}),c&&e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center space-x-1",children:[e.jsx(f,{className:"h-3 w-3"}),e.jsx("span",{children:"Este é o rancho padrão configurado"})]}),l&&!I&&t&&e.jsxs("div",{className:"text-xs text-destructive flex items-center space-x-1",children:[e.jsx(f,{className:"h-3 w-3"}),e.jsxs("span",{children:['Rancho não encontrado: "',t,'"']})]})]})});b.displayName="MessHallSelector";const K=b;export{b as M,K as U};

import{w as O,M as b,L as M,S as w,p as x,O as A}from"./chunk-OIYGIGL5-BjQr_l_M.js";import{j as i}from"./jsx-runtime-D_zvdyIk.js";import{A as S}from"./auth-provider-Diczkjh1.js";import{T as D}from"./theme-provider-CUZGnFwL.js";import{s as P}from"./supabase-BHBWl_Zr.js";import{S as v,n,m as l,a as u,h as Q,Q as j,b as f,f as q,o as d,r as p,c as k,d as y,p as m,s as C,e as E}from"./QueryClientProvider-ChAT3DNt.js";import{M as F}from"./mutation-BtzxBK-B.js";import{i as g}from"./infiniteQueryBehavior-__kUNdpl.js";var H=class extends v{constructor(t={}){super(),this.config=t,this.#t=new Set,this.#e=new Map,this.#s=0}#t;#e;#s;build(t,e,s){const r=new F({client:t,mutationCache:this,mutationId:++this.#s,options:t.defaultMutationOptions(e),state:s});return this.add(r),r}add(t){this.#t.add(t);const e=h(t);if(typeof e=="string"){const s=this.#e.get(e);s?s.push(t):this.#e.set(e,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#t.delete(t)){const e=h(t);if(typeof e=="string"){const s=this.#e.get(e);if(s)if(s.length>1){const r=s.indexOf(t);r!==-1&&s.splice(r,1)}else s[0]===t&&this.#e.delete(e)}}this.notify({type:"removed",mutation:t})}canRun(t){const e=h(t);if(typeof e=="string"){const r=this.#e.get(e)?.find(a=>a.state.status==="pending");return!r||r===t}else return!0}runNext(t){const e=h(t);return typeof e=="string"?this.#e.get(e)?.find(r=>r!==t&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){n.batch(()=>{this.#t.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(t){const e={exact:!0,...t};return this.getAll().find(s=>l(e,s))}findAll(t={}){return this.getAll().filter(e=>l(t,e))}notify(t){n.batch(()=>{this.listeners.forEach(e=>{e(t)})})}resumePausedMutations(){const t=this.getAll().filter(e=>e.state.isPaused);return n.batch(()=>Promise.all(t.map(e=>e.continue().catch(u))))}};function h(t){return t.options.scope?.id}var T=class extends v{constructor(t={}){super(),this.config=t,this.#t=new Map}#t;build(t,e,s){const r=e.queryKey,a=e.queryHash??Q(r,e);let o=this.get(a);return o||(o=new j({client:t,queryKey:r,queryHash:a,options:t.defaultQueryOptions(e),state:s,defaultOptions:t.getQueryDefaults(r)}),this.add(o)),o}add(t){this.#t.has(t.queryHash)||(this.#t.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const e=this.#t.get(t.queryHash);e&&(t.destroy(),e===t&&this.#t.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){n.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#t.get(t)}getAll(){return[...this.#t.values()]}find(t){const e={exact:!0,...t};return this.getAll().find(s=>f(e,s))}findAll(t={}){const e=this.getAll();return Object.keys(t).length>0?e.filter(s=>f(t,s)):e}notify(t){n.batch(()=>{this.listeners.forEach(e=>{e(t)})})}onFocus(){n.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){n.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},I=class{#t;#e;#s;#i;#a;#r;#n;#o;constructor(t={}){this.#t=t.queryCache||new T,this.#e=t.mutationCache||new H,this.#s=t.defaultOptions||{},this.#i=new Map,this.#a=new Map,this.#r=0}mount(){this.#r++,this.#r===1&&(this.#n=q.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#o=d.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#r--,this.#r===0&&(this.#n?.(),this.#n=void 0,this.#o?.(),this.#o=void 0)}isFetching(t){return this.#t.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#e.findAll({...t,status:"pending"}).length}getQueryData(t){const e=this.defaultQueryOptions({queryKey:t});return this.#t.get(e.queryHash)?.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=this.#t.build(this,e),r=s.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(p(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return this.#t.findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),o=this.#t.get(r.queryHash)?.state.data,c=k(e,o);if(c!==void 0)return this.#t.build(this,r).setData(c,{...s,manual:!0})}setQueriesData(t,e,s){return n.batch(()=>this.#t.findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){const e=this.defaultQueryOptions({queryKey:t});return this.#t.get(e.queryHash)?.state}removeQueries(t){const e=this.#t;n.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=this.#t;return n.batch(()=>(s.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},r=n.batch(()=>this.#t.findAll(t).map(a=>a.cancel(s)));return Promise.all(r).then(u).catch(u)}invalidateQueries(t,e={}){return n.batch(()=>(this.#t.findAll(t).forEach(s=>{s.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},r=n.batch(()=>this.#t.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let o=a.fetch(void 0,s);return s.throwOnError||(o=o.catch(u)),a.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(u)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=this.#t.build(this,e);return s.isStaleByTime(p(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(u).catch(u)}fetchInfiniteQuery(t){return t.behavior=g(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(u).catch(u)}ensureInfiniteQueryData(t){return t.behavior=g(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return d.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#s}setDefaultOptions(t){this.#s=t}setQueryDefaults(t,e){this.#i.set(y(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...this.#i.values()],s={};return e.forEach(r=>{m(t,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(t,e){this.#a.set(y(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...this.#a.values()],s={};return e.forEach(r=>{m(t,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...this.#s.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Q(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===C&&(e.enabled=!1),e}defaultMutationOptions(t){return t?._defaulted?t:{...this.#s.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}};const K=new I,G=()=>[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"},{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=K2D:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&display=swap"}];function J({children:t}){return i.jsxs("html",{lang:"pt-br",children:[i.jsxs("head",{children:[i.jsx("meta",{charSet:"utf-8"}),i.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),i.jsx("link",{rel:"icon",type:"image/svg",href:"/favicon.svg"}),i.jsx(b,{}),i.jsx("script",{dangerouslySetInnerHTML:{__html:`
(function() {
  try {
    var key = 'iefa-theme';
    var stored = localStorage.getItem(key);
    var mql = window.matchMedia('(prefers-color-scheme: dark)');
    var system = mql.matches ? 'dark' : 'light';
    var theme = stored || 'system';
    var resolved = theme === 'dark' || (theme === 'system' && system === 'dark') ? 'dark' : 'light';
    var root = document.documentElement;
    if (resolved === 'dark') root.classList.add('dark'); else root.classList.remove('dark');
    root.style.colorScheme = resolved; // ajusta scrollbars/controles nativos
  } catch (e) {}
})();`}}),i.jsx(M,{})]}),i.jsxs("body",{children:[i.jsx(E,{client:K,children:i.jsx(D,{defaultTheme:"system",storageKey:"iefa-theme",children:i.jsx(S,{supabase:P,children:t})})}),i.jsx(w,{}),i.jsx(x,{})]})]})}const V=O(function(){return i.jsx(A,{})});export{J as Layout,V as default,G as links};

import{s as fe,_ as Ss}from"./supabase-BHBWl_Zr.js";import{a as i,w as Ms}from"./chunk-OIYGIGL5-BjQr_l_M.js";import{j as s}from"./jsx-runtime-D_zvdyIk.js";import{B as K}from"./button-Lf--0ePE.js";import{u as Ze}from"./useQuery-DJjewD8N.js";import{u as Gs}from"./QueryClientProvider-ChAT3DNt.js";import{u as Es}from"./auth-provider-Diczkjh1.js";import{C as ae,b as Ee,c as ls,d as Rs,a as te}from"./card-CfdgI_6O.js";import{L as ze}from"./label-DlsFJCEv.js";import{u as ns,S as Bs,a as Ds,b as Fs,c as Is,d as Ts}from"./useMessHalls-DOz8GpeU.js";import{t as ie}from"./index-BRsIKSDg.js";import{S as is}from"./settings-DWiAJPd0.js";import{T as cs}from"./triangle-alert-hVLEMC_8.js";import{C as Ge,L as Re}from"./loader-circle-BLBYjE2T.js";import{U as $e,c as Pe,i as Se,f as _s,g as zs}from"./RanchoUtils-CDHCvR11.js";import{C as $s,a as Oe}from"./coffee-ChEYAlcZ.js";import{M as Os,S as Hs}from"./sun-DiAVwtG2.js";import{B as He}from"./badge-B95kivET.js";import{c as Ls,a as Vs}from"./utils-BEHD0UYf.js";import{C as Us}from"./check-P3aSJU2R.js";import{X as Ws}from"./x-GpSf1MKW.js";import{M as qs}from"./MessHallSelector-Ddc9UKgG.js";import{C as Js}from"./calendar-xf6wNq1b.js";import{U as ds}from"./utensils-crossed-DKyfe-yl.js";import{c as ms}from"./createLucideIcon-CwMMISn7.js";import{C as Ks}from"./circle-check-ChEJ_whZ.js";import{S as Ys}from"./save-DNPrnFJo.js";import{R as Qs}from"./refresh-cw-BWYUqUKP.js";import"./index-yifceNX_.js";import"./useBaseQuery-CE2J4sU2.js";import"./index-B2a0W2do.js";import"./index-CpAFY4EY.js";import"./index-BsqcEdqH.js";import"./index-BnHrxEV7.js";/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],Xe=ms("calendar-days",Zs);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]],er=ms("circle-minus",Xs);function V({className:e,...r}){return s.jsx("div",{"data-slot":"skeleton",className:Ls("bg-accent animate-pulse rounded-md",e),...r})}const sr=30,rr=1500,ar=3e3,tr=()=>({cafe:!1,almoco:!1,janta:!1,ceia:!1}),us=e=>{const r=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return`${r}-${o}-${a}`},or=e=>{const r=[],o=new Date;for(let a=0;a<e;a++){const t=new Date(o);t.setDate(o.getDate()+a),r.push(us(t))}return r},Be=(e,r,o)=>e===1?r:o,je=e=>Be(e,"alteração","alterações"),es=e=>Be(e,"salva","salvas"),Fe=e=>Be(e,"falhou","falharam"),ss=e=>Be(e,"operação","operações"),lr=()=>{const{user:e}=Es(),r=Gs(),[o,a]=i.useState(!1),t=i.useRef(null),n=i.useRef(null),l=i.useRef(null),m=i.useRef(!1),[d,y]=i.useState(""),[C,B]=i.useState(""),[P,E]=i.useState([]),[x,M]=i.useState(!1),[T,H]=i.useState({}),[I,G]=i.useState({}),[v,k]=i.useState(""),A=i.useMemo(()=>or(sr),[]),X=i.useMemo(()=>us(new Date),[]),b=i.useMemo(()=>["mealForecasts",e?.id,A[0],A[A.length-1]],[e?.id,A]),L=i.useMemo(()=>["userData",e?.id],[e?.id]),pe=i.useCallback(()=>{y(""),B("")},[]),ee=i.useCallback(j=>{y(j),B(""),n.current&&clearTimeout(n.current),j&&(n.current=setTimeout(()=>y(""),ar))},[]),W=i.useCallback(j=>{B(j),y("")},[]),{data:oe,isPending:ce,isFetching:q,refetch:J}=Ze({queryKey:b,enabled:o&&!!e?.id,staleTime:6e4,gcTime:5*6e4,refetchOnWindowFocus:!1,refetchOnReconnect:!0,queryFn:async()=>{const{data:j,error:R}=await fe.schema("sisub").from("meal_forecasts").select("date, meal, will_eat, mess_halls(code)").eq("user_id",e.id).gte("date",A[0]).lte("date",A[A.length-1]).order("date",{ascending:!0});if(R)throw R;return j??[]}}),{data:U,isFetching:g,refetch:re}=Ze({queryKey:L,enabled:o&&!!e?.id,staleTime:5*6e4,gcTime:10*6e4,refetchOnWindowFocus:!1,refetchOnReconnect:!0,queryFn:async()=>{const{data:j,error:R}=await fe.schema("sisub").from("user_data").select("default_mess_hall_id").eq("id",e.id).maybeSingle();if(R)throw R;return j??null}});i.useEffect(()=>{if(!e?.id||g)return;const j=U?.default_mess_hall_id??null;j&&!v&&k(String(j))},[e?.id,U?.default_mess_hall_id,g,v]),i.useEffect(()=>{if(!e?.id||!oe)return;const j=P.length===0&&!x;if(!m.current||j){const R={},Y={};A.forEach(D=>{R[D]=tr(),Y[D]=""}),oe.forEach(D=>{const{date:Q,meal:p,will_eat:c,mess_halls:u}=D;if(R[Q]&&p in R[Q]){R[Q][p]=!!c;const w=u?.code||void 0;w&&(Y[Q]=w)}}),H(R),G(Y),m.current=!0}},[e?.id,oe,A,P.length,x]);const be=i.useCallback(j=>{k(j)},[]),ge=i.useCallback(async()=>{if(!e?.id)return;const j=Number(v);if(!Number.isFinite(j)||j<=0){W("Rancho padrão inválido. Selecione um rancho válido.");return}const R=U?.default_mess_hall_id,{error:Y}=await fe.schema("sisub").from("user_data").upsert({id:e.id,default_mess_hall_id:j,email:e.email},{onConflict:"id",ignoreDuplicates:!1});if(Y){R!=null&&k(String(R)),W("Não foi possível salvar o rancho padrão.");return}r.invalidateQueries({queryKey:L})},[e?.id,e?.email,v,U?.default_mess_hall_id,r,L,W]),le=i.useCallback(async()=>{if(!e?.id||P.length===0)return;if(l.current){await l.current;return}const j=async()=>{M(!0),W("");try{const R=[...P],Y=R.reduce((c,u)=>(c[`${u.date}-${u.meal}`]=u,c),{}),D=await Promise.allSettled(Object.values(Y).map(async c=>{try{if(c.value){const u=Number(c.messHallId);if(!Number.isFinite(u)||u<=0)throw new Error(`messHallId inválido: "${c.messHallId}" para ${c.date}-${c.meal}`);const{error:w}=await fe.schema("sisub").from("meal_forecasts").upsert({date:c.date,user_id:e.id,meal:c.meal,will_eat:!0,mess_hall_id:u},{onConflict:"user_id,date,meal",ignoreDuplicates:!1});if(w){await fe.schema("sisub").from("meal_forecasts").delete().eq("user_id",e.id).eq("date",c.date).eq("meal",c.meal);const{error:S}=await fe.schema("sisub").from("meal_forecasts").insert({date:c.date,user_id:e.id,meal:c.meal,will_eat:!0,mess_hall_id:u});if(S)throw S}}else{const{error:u}=await fe.schema("sisub").from("meal_forecasts").delete().eq("user_id",e.id).eq("date",c.date).eq("meal",c.meal);if(u&&!u.message?.includes("No rows deleted"))throw u}return{success:!0,change:c}}catch(u){return console.error(`Erro ao processar ${c.date}-${c.meal}:`,u),{success:!1,change:c,error:u instanceof Error?u.message:"Erro desconhecido"}}})),Q=D.filter(c=>c.status==="fulfilled"&&c.value.success),p=D.filter(c=>c.status==="rejected"||c.status==="fulfilled"&&!c.value.success);if(p.length===0){const c=R.length;ee(`${c} ${je(c)} ${es(c)} com sucesso!`),E(u=>u.filter(w=>!R.some(S=>S.date===w.date&&S.meal===w.meal&&S.value===w.value&&S.messHallId===w.messHallId)))}else if(Q.length>0){const c=Q.length,u=p.length;ee(`${c} ${je(c)} ${es(c)}. ${u} ${je(u)} ${Fe(u)}.`);const w=Q.map(S=>S.value.change);E(S=>S.filter(F=>!w.some(_=>_.date===F.date&&_.meal===F.meal&&_.value===F.value&&_.messHallId===F.messHallId))),p.forEach(S=>{S.status==="fulfilled"?console.error("Erro na operação:",S.value.error):console.error("Promise rejeitada:",S.reason)})}else{const c=p.map(w=>w.status==="fulfilled"?w.value.error:w.reason?.message||"Erro desconhecido").join(", "),u=R.length;throw new Error(u===1?`A ${ss(u)} ${Fe(u)}: ${c}`:`Todas as ${u} ${ss(u)} ${Fe(u)}: ${c}`)}r.invalidateQueries({queryKey:b})}catch(R){console.error("Erro crítico ao salvar mudanças:",R),W(R instanceof Error?`Erro ao salvar ${je(1)}: ${R.message}`:"Erro ao salvar alterações. Tente novamente.")}finally{M(!1),l.current=null}};return l.current=j(),l.current},[e?.id,P,r,b,W,ee]);i.useEffect(()=>{if(t.current&&clearTimeout(t.current),P.length!==0)return t.current=setTimeout(()=>{le()},rr),()=>{t.current&&clearTimeout(t.current)}},[P,le]),i.useEffect(()=>a(!0),[]),i.useEffect(()=>()=>{t.current&&clearTimeout(t.current),n.current&&clearTimeout(n.current)},[]);const $=i.useCallback(async()=>{await Promise.all([J(),re()])},[J,re]);return{success:d,error:C,isLoading:ce,isRefetching:q||g,pendingChanges:P,isSavingBatch:x,selections:T,dayMessHalls:I,defaultMessHallId:v,dates:A,todayString:X,setSuccess:ee,setError:W,setPendingChanges:E,setSelections:H,setDayMessHalls:G,setDefaultMessHallId:be,persistDefaultMessHallId:ge,loadExistingForecasts:$,savePendingChanges:le,clearMessages:pe}},fs=i.memo(({defaultMessHallCode:e,setDefaultMessHallCode:r,onApply:o,onCancel:a,isApplying:t})=>{const{messHalls:n}=ns(),[l,m]=i.useState(!1),{selectedMessHallLabel:d,hasMessHalls:y}=i.useMemo(()=>({selectedMessHallLabel:n.find(M=>M.code===e)?.name||e,hasMessHalls:(n?.length??0)>0}),[e,n]),C=i.useCallback(x=>{r(x)},[r]),B=i.useCallback(async()=>{if(!(t||l)){if(!e){ie.error("Seleção inválida",{description:"Escolha um rancho para continuar."});return}m(!0);try{await o(),ie.success("Preferência salva",{description:"Rancho padrão atualizado com sucesso."})}catch(x){console.error("Erro ao aplicar rancho padrão:",x),ie.error("Erro",{description:"Falha ao salvar sua preferência."})}finally{m(!1)}}},[t,l,e,o]),P=i.useCallback(()=>{t||l||a()},[t,l,a]),E=i.useMemo(()=>!n||n.length===0?s.jsx("div",{className:"px-2 py-4 text-sm text-muted-foreground",children:"Nenhum rancho encontrado."}):n.map(x=>s.jsx(Bs,{value:x.code,className:`
            cursor-pointer
            data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground
            focus:bg-accent/20
          `,children:x.name??x.code},x.code)),[n]);return s.jsxs(ae,{className:"group relative w-full h-fit bg-card text-card-foreground border border-border shadow-sm transition-all duration-300 hover:shadow-md hover:border-accent max-w-xl",children:[s.jsxs(Ee,{className:"pb-4",children:[s.jsx("div",{className:"flex items-start justify-between gap-3",children:s.jsx(ls,{className:"text-foreground",children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"inline-flex items-center justify-center h-8 w-8 rounded-lg bg-background text-foreground ring-1 ring-border",children:s.jsx(is,{className:"h-4.5 w-4.5"})}),s.jsx("span",{className:"font-semibold",children:"Configurar Rancho Padrão"})]})})}),s.jsx(Rs,{className:"mt-3",children:s.jsxs("div",{className:"flex gap-2 rounded-md border p-2.5 bg-accent/10 text-accent-foreground border-accent/30",children:[s.jsx(cs,{className:"h-4 w-4 mt-0.5 shrink-0"}),s.jsx("span",{className:"text-sm",children:"Defina um rancho padrão para os cards que ainda não possuem rancho definido no banco de dados. Esta ação afetará apenas os cards sem rancho configurado."})]})})]}),s.jsxs(te,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(ze,{className:"text-sm font-medium text-foreground",children:"Selecione o rancho padrão:"}),s.jsxs(Ds,{value:e,onValueChange:C,disabled:t||l||!y,children:[s.jsx(Fs,{className:"w-full cursor-pointer bg-background border border-border focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background hover:border-accent",children:s.jsx(Is,{placeholder:y?"Selecione um rancho...":"Sem ranchos disponíveis"})}),s.jsx(Ts,{className:"max-h-60",children:E})]}),e&&s.jsxs("div",{className:"flex items-center gap-2 text-xs rounded-md border p-2 bg-muted text-muted-foreground border-border",children:[s.jsx(Ge,{className:"h-3.5 w-3.5"}),s.jsxs("span",{children:["Rancho selecionado:"," ",s.jsx("strong",{className:"text-foreground",children:d})]})]})]}),s.jsxs("div",{className:"border-t border-border pt-4 flex flex-row-reverse gap-4",children:[s.jsx(K,{size:"sm",onClick:B,disabled:t||l||!e,className:"bg-primary text-primary-foreground hover:bg-primary/90 focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:opacity-50 disabled:cursor-not-allowed",children:t||l?s.jsxs(s.Fragment,{children:[s.jsx(Re,{className:"h-4 w-4 animate-spin mr-2"}),"Aplicando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Aplicar"]})}),s.jsx(K,{variant:"outline",size:"sm",onClick:P,disabled:t||l,className:"hover:bg-muted focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background",children:"Cancelar"})]})]})]})});fs.displayName="DefaultMessHallSelector";const nr=[{value:"GAP-RJ - HCA",label:"GAP-RJ - HCA"},{value:"GAP-RJ - GAP SEDE",label:"GAP-RJ - GAP SEDE"},{value:"GAP-RJ - GARAGEM",label:"GAP-RJ - GARAGEM"},{value:"GAP-RJ - PAME",label:"GAP-RJ - PAME"},{value:"GAP-GL - GAP (BAGL)",label:"GAP-GL - GAP (BAGL)"},{value:"GAP-GL - CGABEG",label:"GAP-GL - CGABEG"},{value:"GAP-GL - HFAG",label:"GAP-GL - HFAG"},{value:"GAP-GL - CEMAL",label:"GAP-GL - CEMAL"},{value:"GAP-GL - PAMB",label:"GAP-GL - PAMB"},{value:"DIRAD - DIRAD",label:"DIRAD - DIRAD"},{value:"GAP-AF - BAAF (GAP-AF)",label:"GAP-AF - BAAF (GAP-AF)"},{value:"GAP-AF - CPA-AF",label:"GAP-AF - CPA-AF"},{value:"GAP-AF - HAAF",label:"GAP-AF - HAAF"},{value:"GAP-AF - UNIFA",label:"GAP-AF - UNIFA"},{value:"BASC - BASC",label:"BASC - BASC"},{value:"GAP-SP - BASP",label:"GAP-SP - BASP"},{value:"GAP-SP - PAMA-SP",label:"GAP-SP - PAMA-SP"},{value:"GAP-SP - GAP-SP",label:"GAP-SP - GAP-SP"},{value:"GAP-SP - HFASP",label:"GAP-SP - HFASP"},{value:"GAP-SP - BAST",label:"GAP-SP - BAST"},{value:"GAP-SP - COMGAP",label:"GAP-SP - COMGAP"},{value:"AFA - FAYS",label:"AFA - FAYS"},{value:"AFA - AFA",label:"AFA - AFA"},{value:"GAP-SJ - IEAV",label:"GAP-SJ - IEAV"},{value:"GAP-SJ - GAP-SJ",label:"GAP-SJ - GAP-SJ"},{value:"EPCAR - EPCAR",label:"EPCAR - EPCAR"},{value:"GAP-LS - CIAAR",label:"GAP-LS - CIAAR"},{value:"GAP-LS - PAMA-LS",label:"GAP-LS - PAMA-LS"},{value:"GAP-LS - ESQUADRAO DE SAUDE DE LS",label:"GAP-LS - ESQUADRAO DE SAUDE DE LS"},{value:"BASM - BASM",label:"BASM - BASM"},{value:"GAP-CO - BACO",label:"GAP-CO - BACO"},{value:"GAP-CO - GAP-CO",label:"GAP-CO - GAP-CO"},{value:"GAP-CO - HACO",label:"GAP-CO - HACO"},{value:"BAFL - BAFL",label:"BAFL - BAFL"},{value:"CINDACTA 2 - CINDACTA II",label:"CINDACTA 2 - CINDACTA II"},{value:"GAP-BE - BABE",label:"GAP-BE - BABE"},{value:"GAP-BE - COMARA",label:"GAP-BE - COMARA"},{value:"GAP-BE - HABE",label:"GAP-BE - HABE"},{value:"GAP-MN - DACO-MN",label:"GAP-MN - DACO-MN"},{value:"GAP-MN - GAP-MN",label:"GAP-MN - GAP-MN"},{value:"GAP-MN - CINDACTA IV",label:"GAP-MN - CINDACTA IV (em fase de ativação)"},{value:"GAP-MN - HAMN",label:"GAP-MN - HAMN"},{value:"BABV - BABV",label:"BABV - BABV"},{value:"BAPV - BAPV",label:"BAPV - BAPV"},{value:"CLA - CLA-AK",label:"CLA - CLA-AK"},{value:"BAFZ - BAFZ",label:"BAFZ - BAFZ"},{value:"BANT - BANT",label:"BANT - BANT"},{value:"BANT - CLBI",label:"BANT - CLBI"},{value:"GAP-RF - BARF",label:"GAP-RF - BARF"},{value:"GAP-RF - HARF",label:"GAP-RF - HARF"},{value:"GAP-RF - GAP-RF",label:"GAP-RF - GAP-RF"},{value:"BASV - BASV",label:"BASV - BASV"},{value:"BASV - CEMCOHA",label:"BASV - CEMCOHA"},{value:"GAP-DF - BABR-SUL",label:"GAP-DF - BABR-SUL"},{value:"GAP-DF - CACHIMBO-CPBV",label:"GAP-DF - CACHIMBO-CPBV"},{value:"GAP-DF - HFAB",label:"GAP-DF - HFAB"},{value:"GAP-DF - GAP DF – NORTE",label:"GAP-DF - GAP DF – NORTE"},{value:"GAP-BR - GAP BR",label:"GAP-BR - GAP BR"},{value:"GABAER - GABAER",label:"GABAER - GABAER"},{value:"BAAN - BAAN",label:"BAAN - BAAN"},{value:"BACG - BACG",label:"BACG - BACG"},{value:"EEAR - GSAU-GW",label:"EEAR - GSAU-GW"},{value:"EEAR - Rancho",label:"EEAR - Rancho"},{value:"EEAR - PAGW",label:"EEAR - PAGW"},{value:"EEAR - SCI",label:"EEAR - SCI"},{value:"EEAR - STRS",label:"EEAR - STRS"},{value:"GAP-BE - I COMAR",label:"GAP-BE - I COMAR"},{value:"EEAR - SGER",label:"EEAR - SGER"}];Array.from(new Set(nr.map(e=>e.value.split(" - ")[0].trim()))).map(e=>({value:e,label:e}));const Ne=[{value:"cafe",label:"Café",icon:$s,color:"bg-orange-100 text-orange-800",time:"06:30"},{value:"almoco",label:"Almoço",icon:$e,color:"bg-green-100 text-green-800",time:"11:30"},{value:"janta",label:"Jantar",icon:Os,color:"bg-blue-100 text-blue-800",time:"17:30"},{value:"ceia",label:"Ceia",icon:Hs,color:"bg-purple-100 text-purple-800",time:"21:00"}],Me=2,qe="-",ir=e=>{const r=dr(e),{conflictingClassGroups:o,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:l=>{const m=l.split(qe);return m[0]===""&&m.length!==1&&m.shift(),hs(m,r)||cr(l)},getConflictingClassGroupIds:(l,m)=>{const d=o[l]||[];return m&&a[l]?[...d,...a[l]]:d}}},hs=(e,r)=>{if(e.length===0)return r.classGroupId;const o=e[0],a=r.nextPart.get(o),t=a?hs(e.slice(1),a):void 0;if(t)return t;if(r.validators.length===0)return;const n=e.join(qe);return r.validators.find(({validator:l})=>l(n))?.classGroupId},rs=/^\[(.+)\]$/,cr=e=>{if(rs.test(e)){const r=rs.exec(e)[1],o=r?.substring(0,r.indexOf(":"));if(o)return"arbitrary.."+o}},dr=e=>{const{theme:r,classGroups:o}=e,a={nextPart:new Map,validators:[]};for(const t in o)Le(o[t],a,t,r);return a},Le=(e,r,o,a)=>{e.forEach(t=>{if(typeof t=="string"){const n=t===""?r:as(r,t);n.classGroupId=o;return}if(typeof t=="function"){if(mr(t)){Le(t(a),r,o,a);return}r.validators.push({validator:t,classGroupId:o});return}Object.entries(t).forEach(([n,l])=>{Le(l,as(r,n),o,a)})})},as=(e,r)=>{let o=e;return r.split(qe).forEach(a=>{o.nextPart.has(a)||o.nextPart.set(a,{nextPart:new Map,validators:[]}),o=o.nextPart.get(a)}),o},mr=e=>e.isThemeGetter,ur=e=>{if(e<1)return{get:()=>{},set:()=>{}};let r=0,o=new Map,a=new Map;const t=(n,l)=>{o.set(n,l),r++,r>e&&(r=0,a=o,o=new Map)};return{get(n){let l=o.get(n);if(l!==void 0)return l;if((l=a.get(n))!==void 0)return t(n,l),l},set(n,l){o.has(n)?o.set(n,l):t(n,l)}}},Ve="!",Ue=":",fr=Ue.length,hr=e=>{const{prefix:r,experimentalParseClassName:o}=e;let a=t=>{const n=[];let l=0,m=0,d=0,y;for(let x=0;x<t.length;x++){let M=t[x];if(l===0&&m===0){if(M===Ue){n.push(t.slice(d,x)),d=x+fr;continue}if(M==="/"){y=x;continue}}M==="["?l++:M==="]"?l--:M==="("?m++:M===")"&&m--}const C=n.length===0?t:t.substring(d),B=pr(C),P=B!==C,E=y&&y>d?y-d:void 0;return{modifiers:n,hasImportantModifier:P,baseClassName:B,maybePostfixModifierPosition:E}};if(r){const t=r+Ue,n=a;a=l=>l.startsWith(t)?n(l.substring(t.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(o){const t=a;a=n=>o({className:n,parseClassName:t})}return a},pr=e=>e.endsWith(Ve)?e.substring(0,e.length-1):e.startsWith(Ve)?e.substring(1):e,br=e=>{const r=Object.fromEntries(e.orderSensitiveModifiers.map(a=>[a,!0]));return a=>{if(a.length<=1)return a;const t=[];let n=[];return a.forEach(l=>{l[0]==="["||r[l]?(t.push(...n.sort(),l),n=[]):n.push(l)}),t.push(...n.sort()),t}},gr=e=>({cache:ur(e.cacheSize),parseClassName:hr(e),sortModifiers:br(e),...ir(e)}),xr=/\s+/,vr=(e,r)=>{const{parseClassName:o,getClassGroupId:a,getConflictingClassGroupIds:t,sortModifiers:n}=r,l=[],m=e.trim().split(xr);let d="";for(let y=m.length-1;y>=0;y-=1){const C=m[y],{isExternal:B,modifiers:P,hasImportantModifier:E,baseClassName:x,maybePostfixModifierPosition:M}=o(C);if(B){d=C+(d.length>0?" "+d:d);continue}let T=!!M,H=a(T?x.substring(0,M):x);if(!H){if(!T){d=C+(d.length>0?" "+d:d);continue}if(H=a(x),!H){d=C+(d.length>0?" "+d:d);continue}T=!1}const I=n(P).join(":"),G=E?I+Ve:I,v=G+H;if(l.includes(v))continue;l.push(v);const k=t(H,T);for(let A=0;A<k.length;++A){const X=k[A];l.push(G+X)}d=C+(d.length>0?" "+d:d)}return d};function yr(){let e=0,r,o,a="";for(;e<arguments.length;)(r=arguments[e++])&&(o=ps(r))&&(a&&(a+=" "),a+=o);return a}const ps=e=>{if(typeof e=="string")return e;let r,o="";for(let a=0;a<e.length;a++)e[a]&&(r=ps(e[a]))&&(o&&(o+=" "),o+=r);return o};function Ar(e,...r){let o,a,t,n=l;function l(d){const y=r.reduce((C,B)=>B(C),e());return o=gr(y),a=o.cache.get,t=o.cache.set,n=m,m(d)}function m(d){const y=a(d);if(y)return y;const C=vr(d,o);return t(d,C),C}return function(){return n(yr.apply(null,arguments))}}const O=e=>{const r=o=>o[e]||[];return r.isThemeGetter=!0,r},bs=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,gs=/^\((?:(\w[\w-]*):)?(.+)\)$/i,wr=/^\d+\/\d+$/,Nr=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,jr=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kr=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Cr=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Pr=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xe=e=>wr.test(e),N=e=>!!e&&!Number.isNaN(Number(e)),de=e=>!!e&&Number.isInteger(Number(e)),Ie=e=>e.endsWith("%")&&N(e.slice(0,-1)),ne=e=>Nr.test(e),Sr=()=>!0,Mr=e=>jr.test(e)&&!kr.test(e),xs=()=>!1,Gr=e=>Cr.test(e),Er=e=>Pr.test(e),Rr=e=>!f(e)&&!h(e),Br=e=>ye(e,As,xs),f=e=>bs.test(e),he=e=>ye(e,ws,Mr),Te=e=>ye(e,_r,N),ts=e=>ye(e,vs,xs),Dr=e=>ye(e,ys,Er),ke=e=>ye(e,Ns,Gr),h=e=>gs.test(e),we=e=>Ae(e,ws),Fr=e=>Ae(e,zr),os=e=>Ae(e,vs),Ir=e=>Ae(e,As),Tr=e=>Ae(e,ys),Ce=e=>Ae(e,Ns,!0),ye=(e,r,o)=>{const a=bs.exec(e);return a?a[1]?r(a[1]):o(a[2]):!1},Ae=(e,r,o=!1)=>{const a=gs.exec(e);return a?a[1]?r(a[1]):o:!1},vs=e=>e==="position"||e==="percentage",ys=e=>e==="image"||e==="url",As=e=>e==="length"||e==="size"||e==="bg-size",ws=e=>e==="length",_r=e=>e==="number",zr=e=>e==="family-name",Ns=e=>e==="shadow",$r=()=>{const e=O("color"),r=O("font"),o=O("text"),a=O("font-weight"),t=O("tracking"),n=O("leading"),l=O("breakpoint"),m=O("container"),d=O("spacing"),y=O("radius"),C=O("shadow"),B=O("inset-shadow"),P=O("text-shadow"),E=O("drop-shadow"),x=O("blur"),M=O("perspective"),T=O("aspect"),H=O("ease"),I=O("animate"),G=()=>["auto","avoid","all","avoid-page","page","left","right","column"],v=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...v(),h,f],A=()=>["auto","hidden","clip","visible","scroll"],X=()=>["auto","contain","none"],b=()=>[h,f,d],L=()=>[xe,"full","auto",...b()],pe=()=>[de,"none","subgrid",h,f],ee=()=>["auto",{span:["full",de,h,f]},de,h,f],W=()=>[de,"auto",h,f],oe=()=>["auto","min","max","fr",h,f],ce=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],q=()=>["start","end","center","stretch","center-safe","end-safe"],J=()=>["auto",...b()],U=()=>[xe,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...b()],g=()=>[e,h,f],re=()=>[...v(),os,ts,{position:[h,f]}],be=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ge=()=>["auto","cover","contain",Ir,Br,{size:[h,f]}],le=()=>[Ie,we,he],$=()=>["","none","full",y,h,f],j=()=>["",N,we,he],R=()=>["solid","dashed","dotted","double"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>[N,Ie,os,ts],Q=()=>["","none",x,h,f],p=()=>["none",N,h,f],c=()=>["none",N,h,f],u=()=>[N,h,f],w=()=>[xe,"full",...b()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ne],breakpoint:[ne],color:[Sr],container:[ne],"drop-shadow":[ne],ease:["in","out","in-out"],font:[Rr],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ne],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ne],shadow:[ne],spacing:["px",N],text:[ne],"text-shadow":[ne],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",xe,f,h,T]}],container:["container"],columns:[{columns:[N,f,h,m]}],"break-after":[{"break-after":G()}],"break-before":[{"break-before":G()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:X()}],"overscroll-x":[{"overscroll-x":X()}],"overscroll-y":[{"overscroll-y":X()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:L()}],"inset-x":[{"inset-x":L()}],"inset-y":[{"inset-y":L()}],start:[{start:L()}],end:[{end:L()}],top:[{top:L()}],right:[{right:L()}],bottom:[{bottom:L()}],left:[{left:L()}],visibility:["visible","invisible","collapse"],z:[{z:[de,"auto",h,f]}],basis:[{basis:[xe,"full","auto",m,...b()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[N,xe,"auto","initial","none",f]}],grow:[{grow:["",N,h,f]}],shrink:[{shrink:["",N,h,f]}],order:[{order:[de,"first","last","none",h,f]}],"grid-cols":[{"grid-cols":pe()}],"col-start-end":[{col:ee()}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":pe()}],"row-start-end":[{row:ee()}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":oe()}],"auto-rows":[{"auto-rows":oe()}],gap:[{gap:b()}],"gap-x":[{"gap-x":b()}],"gap-y":[{"gap-y":b()}],"justify-content":[{justify:[...ce(),"normal"]}],"justify-items":[{"justify-items":[...q(),"normal"]}],"justify-self":[{"justify-self":["auto",...q()]}],"align-content":[{content:["normal",...ce()]}],"align-items":[{items:[...q(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...q(),{baseline:["","last"]}]}],"place-content":[{"place-content":ce()}],"place-items":[{"place-items":[...q(),"baseline"]}],"place-self":[{"place-self":["auto",...q()]}],p:[{p:b()}],px:[{px:b()}],py:[{py:b()}],ps:[{ps:b()}],pe:[{pe:b()}],pt:[{pt:b()}],pr:[{pr:b()}],pb:[{pb:b()}],pl:[{pl:b()}],m:[{m:J()}],mx:[{mx:J()}],my:[{my:J()}],ms:[{ms:J()}],me:[{me:J()}],mt:[{mt:J()}],mr:[{mr:J()}],mb:[{mb:J()}],ml:[{ml:J()}],"space-x":[{"space-x":b()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":b()}],"space-y-reverse":["space-y-reverse"],size:[{size:U()}],w:[{w:[m,"screen",...U()]}],"min-w":[{"min-w":[m,"screen","none",...U()]}],"max-w":[{"max-w":[m,"screen","none","prose",{screen:[l]},...U()]}],h:[{h:["screen","lh",...U()]}],"min-h":[{"min-h":["screen","lh","none",...U()]}],"max-h":[{"max-h":["screen","lh",...U()]}],"font-size":[{text:["base",o,we,he]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[a,h,Te]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ie,f]}],"font-family":[{font:[Fr,f,r]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[t,h,f]}],"line-clamp":[{"line-clamp":[N,"none",h,Te]}],leading:[{leading:[n,...b()]}],"list-image":[{"list-image":["none",h,f]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",h,f]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:g()}],"text-color":[{text:g()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...R(),"wavy"]}],"text-decoration-thickness":[{decoration:[N,"from-font","auto",h,he]}],"text-decoration-color":[{decoration:g()}],"underline-offset":[{"underline-offset":[N,"auto",h,f]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:b()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",h,f]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",h,f]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:re()}],"bg-repeat":[{bg:be()}],"bg-size":[{bg:ge()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},de,h,f],radial:["",h,f],conic:[de,h,f]},Tr,Dr]}],"bg-color":[{bg:g()}],"gradient-from-pos":[{from:le()}],"gradient-via-pos":[{via:le()}],"gradient-to-pos":[{to:le()}],"gradient-from":[{from:g()}],"gradient-via":[{via:g()}],"gradient-to":[{to:g()}],rounded:[{rounded:$()}],"rounded-s":[{"rounded-s":$()}],"rounded-e":[{"rounded-e":$()}],"rounded-t":[{"rounded-t":$()}],"rounded-r":[{"rounded-r":$()}],"rounded-b":[{"rounded-b":$()}],"rounded-l":[{"rounded-l":$()}],"rounded-ss":[{"rounded-ss":$()}],"rounded-se":[{"rounded-se":$()}],"rounded-ee":[{"rounded-ee":$()}],"rounded-es":[{"rounded-es":$()}],"rounded-tl":[{"rounded-tl":$()}],"rounded-tr":[{"rounded-tr":$()}],"rounded-br":[{"rounded-br":$()}],"rounded-bl":[{"rounded-bl":$()}],"border-w":[{border:j()}],"border-w-x":[{"border-x":j()}],"border-w-y":[{"border-y":j()}],"border-w-s":[{"border-s":j()}],"border-w-e":[{"border-e":j()}],"border-w-t":[{"border-t":j()}],"border-w-r":[{"border-r":j()}],"border-w-b":[{"border-b":j()}],"border-w-l":[{"border-l":j()}],"divide-x":[{"divide-x":j()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":j()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...R(),"hidden","none"]}],"divide-style":[{divide:[...R(),"hidden","none"]}],"border-color":[{border:g()}],"border-color-x":[{"border-x":g()}],"border-color-y":[{"border-y":g()}],"border-color-s":[{"border-s":g()}],"border-color-e":[{"border-e":g()}],"border-color-t":[{"border-t":g()}],"border-color-r":[{"border-r":g()}],"border-color-b":[{"border-b":g()}],"border-color-l":[{"border-l":g()}],"divide-color":[{divide:g()}],"outline-style":[{outline:[...R(),"none","hidden"]}],"outline-offset":[{"outline-offset":[N,h,f]}],"outline-w":[{outline:["",N,we,he]}],"outline-color":[{outline:g()}],shadow:[{shadow:["","none",C,Ce,ke]}],"shadow-color":[{shadow:g()}],"inset-shadow":[{"inset-shadow":["none",B,Ce,ke]}],"inset-shadow-color":[{"inset-shadow":g()}],"ring-w":[{ring:j()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:g()}],"ring-offset-w":[{"ring-offset":[N,he]}],"ring-offset-color":[{"ring-offset":g()}],"inset-ring-w":[{"inset-ring":j()}],"inset-ring-color":[{"inset-ring":g()}],"text-shadow":[{"text-shadow":["none",P,Ce,ke]}],"text-shadow-color":[{"text-shadow":g()}],opacity:[{opacity:[N,h,f]}],"mix-blend":[{"mix-blend":[...Y(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Y()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[N]}],"mask-image-linear-from-pos":[{"mask-linear-from":D()}],"mask-image-linear-to-pos":[{"mask-linear-to":D()}],"mask-image-linear-from-color":[{"mask-linear-from":g()}],"mask-image-linear-to-color":[{"mask-linear-to":g()}],"mask-image-t-from-pos":[{"mask-t-from":D()}],"mask-image-t-to-pos":[{"mask-t-to":D()}],"mask-image-t-from-color":[{"mask-t-from":g()}],"mask-image-t-to-color":[{"mask-t-to":g()}],"mask-image-r-from-pos":[{"mask-r-from":D()}],"mask-image-r-to-pos":[{"mask-r-to":D()}],"mask-image-r-from-color":[{"mask-r-from":g()}],"mask-image-r-to-color":[{"mask-r-to":g()}],"mask-image-b-from-pos":[{"mask-b-from":D()}],"mask-image-b-to-pos":[{"mask-b-to":D()}],"mask-image-b-from-color":[{"mask-b-from":g()}],"mask-image-b-to-color":[{"mask-b-to":g()}],"mask-image-l-from-pos":[{"mask-l-from":D()}],"mask-image-l-to-pos":[{"mask-l-to":D()}],"mask-image-l-from-color":[{"mask-l-from":g()}],"mask-image-l-to-color":[{"mask-l-to":g()}],"mask-image-x-from-pos":[{"mask-x-from":D()}],"mask-image-x-to-pos":[{"mask-x-to":D()}],"mask-image-x-from-color":[{"mask-x-from":g()}],"mask-image-x-to-color":[{"mask-x-to":g()}],"mask-image-y-from-pos":[{"mask-y-from":D()}],"mask-image-y-to-pos":[{"mask-y-to":D()}],"mask-image-y-from-color":[{"mask-y-from":g()}],"mask-image-y-to-color":[{"mask-y-to":g()}],"mask-image-radial":[{"mask-radial":[h,f]}],"mask-image-radial-from-pos":[{"mask-radial-from":D()}],"mask-image-radial-to-pos":[{"mask-radial-to":D()}],"mask-image-radial-from-color":[{"mask-radial-from":g()}],"mask-image-radial-to-color":[{"mask-radial-to":g()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":v()}],"mask-image-conic-pos":[{"mask-conic":[N]}],"mask-image-conic-from-pos":[{"mask-conic-from":D()}],"mask-image-conic-to-pos":[{"mask-conic-to":D()}],"mask-image-conic-from-color":[{"mask-conic-from":g()}],"mask-image-conic-to-color":[{"mask-conic-to":g()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:re()}],"mask-repeat":[{mask:be()}],"mask-size":[{mask:ge()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",h,f]}],filter:[{filter:["","none",h,f]}],blur:[{blur:Q()}],brightness:[{brightness:[N,h,f]}],contrast:[{contrast:[N,h,f]}],"drop-shadow":[{"drop-shadow":["","none",E,Ce,ke]}],"drop-shadow-color":[{"drop-shadow":g()}],grayscale:[{grayscale:["",N,h,f]}],"hue-rotate":[{"hue-rotate":[N,h,f]}],invert:[{invert:["",N,h,f]}],saturate:[{saturate:[N,h,f]}],sepia:[{sepia:["",N,h,f]}],"backdrop-filter":[{"backdrop-filter":["","none",h,f]}],"backdrop-blur":[{"backdrop-blur":Q()}],"backdrop-brightness":[{"backdrop-brightness":[N,h,f]}],"backdrop-contrast":[{"backdrop-contrast":[N,h,f]}],"backdrop-grayscale":[{"backdrop-grayscale":["",N,h,f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[N,h,f]}],"backdrop-invert":[{"backdrop-invert":["",N,h,f]}],"backdrop-opacity":[{"backdrop-opacity":[N,h,f]}],"backdrop-saturate":[{"backdrop-saturate":[N,h,f]}],"backdrop-sepia":[{"backdrop-sepia":["",N,h,f]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":b()}],"border-spacing-x":[{"border-spacing-x":b()}],"border-spacing-y":[{"border-spacing-y":b()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",h,f]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[N,"initial",h,f]}],ease:[{ease:["linear","initial",H,h,f]}],delay:[{delay:[N,h,f]}],animate:[{animate:["none",I,h,f]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[M,h,f]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:p()}],"rotate-x":[{"rotate-x":p()}],"rotate-y":[{"rotate-y":p()}],"rotate-z":[{"rotate-z":p()}],scale:[{scale:c()}],"scale-x":[{"scale-x":c()}],"scale-y":[{"scale-y":c()}],"scale-z":[{"scale-z":c()}],"scale-3d":["scale-3d"],skew:[{skew:u()}],"skew-x":[{"skew-x":u()}],"skew-y":[{"skew-y":u()}],transform:[{transform:[h,f,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:w()}],"translate-x":[{"translate-x":w()}],"translate-y":[{"translate-y":w()}],"translate-z":[{"translate-z":w()}],"translate-none":["translate-none"],accent:[{accent:g()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:g()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",h,f]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":b()}],"scroll-mx":[{"scroll-mx":b()}],"scroll-my":[{"scroll-my":b()}],"scroll-ms":[{"scroll-ms":b()}],"scroll-me":[{"scroll-me":b()}],"scroll-mt":[{"scroll-mt":b()}],"scroll-mr":[{"scroll-mr":b()}],"scroll-mb":[{"scroll-mb":b()}],"scroll-ml":[{"scroll-ml":b()}],"scroll-p":[{"scroll-p":b()}],"scroll-px":[{"scroll-px":b()}],"scroll-py":[{"scroll-py":b()}],"scroll-ps":[{"scroll-ps":b()}],"scroll-pe":[{"scroll-pe":b()}],"scroll-pt":[{"scroll-pt":b()}],"scroll-pr":[{"scroll-pr":b()}],"scroll-pb":[{"scroll-pb":b()}],"scroll-pl":[{"scroll-pl":b()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",h,f]}],fill:[{fill:["none",...g()]}],"stroke-w":[{stroke:[N,we,he,Te]}],stroke:[{stroke:["none",...g()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Or=Ar($r);function ve(...e){return Or(Vs(e))}const Je=i.memo(({meal:e,isSelected:r,onToggle:o,disabled:a,compact:t=!1})=>{const n=e.icon,l=ve("w-full rounded-lg border-2 transition-all duration-200 group","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1",{"border-green-500 bg-green-50 text-green-900":r,"border-gray-200 bg-white text-gray-700 hover:border-gray-300 hover:bg-gray-50":!r,"cursor-pointer active:scale-95 hover:shadow-sm":!a,"opacity-50 cursor-not-allowed":a,"p-2":t,"p-3":!t}),m=ve("transition-colors duration-200",{"h-4 w-4":t,"h-5 w-5":!t,"text-green-600":r,"text-gray-500 group-hover:text-gray-600":!r&&!a});return t?s.jsx("button",{onClick:o,disabled:a,className:l,title:`${e.label} - ${r?"Confirmado":"Não vai"}`,children:s.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[s.jsx(n,{className:m}),s.jsx("span",{className:"text-xs font-medium truncate w-full text-center",children:e.label}),s.jsx("div",{className:ve("w-2 h-2 rounded-full transition-colors duration-200",r?"bg-green-500":"bg-gray-300")})]})}):s.jsx("button",{onClick:o,disabled:a,className:l,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(n,{className:m}),s.jsx("span",{className:"font-medium",children:e.label})]}),s.jsx("div",{className:ve("flex items-center justify-center w-6 h-6 rounded-full transition-all duration-200",{"bg-green-500 text-white":r,"bg-gray-200 text-gray-500":!r}),children:r?s.jsx(Us,{className:"h-3 w-3"}):s.jsx(Ws,{className:"h-3 w-3"})})]})})});Je.displayName="MealButton";const Ke=e=>Object.values(e).filter(Boolean).length,De=i.memo(()=>s.jsxs(ae,{className:"w-80 flex-shrink-0 bg-card text-card-foreground border border-border",children:[s.jsxs(Ee,{className:"pb-3",children:[s.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-4 items-start",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(V,{className:"h-4 w-4"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(V,{className:"h-5 w-20"}),s.jsx(V,{className:"h-4 w-16"})]})]}),s.jsx("div",{className:"flex items-center space-x-1",children:s.jsx(V,{className:"h-6 w-12 rounded-full"})})]}),s.jsx("div",{className:"h-12 flex items-center",children:s.jsx("div",{className:"w-full bg-muted/50 rounded-lg p-2 border border-border",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(V,{className:"h-4 w-24"}),s.jsx("div",{className:"flex space-x-1",children:[...Array(4)].map((e,r)=>s.jsx(V,{className:"w-2 h-2 rounded-full"},r))})]})})})]}),s.jsx(te,{children:s.jsxs("div",{className:"grid grid-rows-[auto_1fr_auto] gap-3 min-h-[200px]",children:[s.jsx("div",{className:"bg-muted/30 rounded-lg p-3 border border-border",children:s.jsx(V,{className:"h-8 w-full"})}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:[...Array(4)].map((e,r)=>s.jsx(V,{className:"h-12 rounded-lg"},r))}),s.jsx("div",{className:"h-9 flex items-center",children:s.jsxs("div",{className:"flex gap-2 w-full",children:[s.jsx(V,{className:"flex-1 h-7"}),s.jsx(V,{className:"flex-1 h-7"})]})})]})})]}));De.displayName="DayCardSkeleton";const We=i.memo(({date:e,daySelections:r,dayMessHallId:o,defaultMessHallId:a,onMealToggle:t,onMessHallChange:n,formattedDate:l,dayOfWeek:m,isToday:d,isDateNear:y,pendingChanges:C,isSaving:B=!1,selectedMealsCount:P,isLoading:E=!1})=>{if(E)return s.jsx(De,{});const x=i.useMemo(()=>{const G=C.some(A=>A.date===e),v=P??Ke(r);return{hasPendingChanges:G,selectedCount:v,isUsingNonDefaultMessHall:o&&o!==a,isEmpty:v===0,isFull:v===4,hasPartialSelection:v>0&&v<4}},[C,e,r,o,a,P]),M=i.useMemo(()=>ve("w-80 flex-shrink-0 transition-all duration-200 hover:shadow-md relative","bg-card text-card-foreground border border-border",{"ring-2 ring-primary shadow-lg bg-primary/5":d,"ring-1 ring-accent bg-accent/10":x.hasPendingChanges&&!d,"opacity-75 grayscale-[0.3]":y&&!d,"bg-primary/10 border-primary/40":x.isFull&&!d,"bg-secondary/10 border-secondary/40":x.hasPartialSelection&&!d&&!x.hasPendingChanges,"bg-muted/30 border-border":x.isEmpty&&!d&&!x.hasPendingChanges}),[d,y,x]),T=i.useCallback(G=>{t(e,G)},[e,t]),H=i.useCallback(G=>{n(e,G)},[e,n]),I=B||y;return s.jsxs(ae,{className:M,children:[s.jsxs(Ee,{className:"pb-3",children:[s.jsxs("div",{className:"grid grid-cols-[1fr_auto] gap-4 items-start",children:[s.jsxs("div",{className:"flex items-center space-x-2 min-w-0",children:[s.jsx(Js,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("h3",{className:"font-semibold text-foreground truncate",children:l}),s.jsx("p",{className:"text-sm text-muted-foreground capitalize truncate",children:m})]})]}),s.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[B&&s.jsx(Re,{className:"h-4 w-4 animate-spin text-primary"}),y&&s.jsx(Oe,{className:"h-4 w-4 text-accent"}),d&&s.jsx(He,{variant:"default",className:"text-xs px-2 py-0",children:"Hoje"}),x.hasPendingChanges&&s.jsx(He,{variant:"outline",className:"text-xs px-2 py-0 border-accent text-accent",children:"Saving"})]})]}),s.jsx("div",{className:"h-12 flex items-center",children:x.selectedCount>0&&s.jsx("div",{className:"w-full bg-background/80 backdrop-blur-sm rounded-lg p-2 border border-border",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-sm font-medium text-foreground",children:[x.selectedCount,"/4 meals"]}),s.jsx("div",{className:"flex space-x-1",children:Ne.map(G=>{const v=G.value,k=r[v];return s.jsx("div",{className:ve("w-2 h-2 rounded-full transition-all duration-200",k?"bg-primary scale-110":"bg-muted-foreground/30"),title:`${G.label}: ${k?"Confirmed":"Not going"}`},G.value)})})]})})})]}),s.jsx(te,{children:s.jsxs("div",{className:"grid grid-rows-[auto_1fr_auto] gap-3 min-h-[200px]",children:[s.jsx("div",{className:"bg-accent/10 backdrop-blur-sm rounded-lg p-3 border border-accent/30",children:s.jsx(qs,{value:o,onChange:H,disabled:I,hasDefaultMessHall:!1})}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Ne.map(G=>{const v=G.value;return s.jsx(Je,{meal:G,isSelected:r[v],onToggle:()=>T(v),disabled:I,compact:!0},G.value)})}),s.jsx("div",{className:"h-9 flex items-center",children:!I&&s.jsxs("div",{className:"flex gap-2 w-full",children:[s.jsx(K,{variant:"outline",size:"sm",onClick:()=>{Ne.forEach(G=>{const v=G.value;r[v]||T(v)})},className:"flex-1 text-xs h-7",children:"Todas"}),s.jsx(K,{variant:"outline",size:"sm",onClick:()=>{Ne.forEach(G=>{const v=G.value;r[v]&&T(v)})},className:"flex-1 text-xs h-7",children:"Limpar"})]})})]})})]})});We.displayName="DayCard";const Hr=(e,r,o,a,t,n,l)=>i.useMemo(()=>{const m=Ke(n),d=l.some(y=>y.date===e);return{formattedDate:a(e),dayOfWeek:t(e),selectedMealsCount:m,isDateNear:o(e),isToday:e===r,hasPendingChanges:d,isEmpty:m===0,isFull:m===4,hasPartialSelection:m>0&&m<4}},[e,r,o,a,t,n,l]),Lr=(e,r)=>i.useMemo(()=>{const o={};return e.forEach(a=>{const t=r[a],n=t?Ke(t):0;o[a]={selectedCount:n,isEmpty:n===0,isFull:n===4}}),o},[e,r]),Vr=Object.freeze(Object.defineProperty({__proto__:null,DayCard:We,DayCardSkeleton:De,default:We,useDayCardData:Hr,useDayCardOptimization:Lr},Symbol.toStringTag,{value:"Module"})),js=i.memo(({targetDates:e,initialTemplate:r,onApply:o,onCancel:a,isApplying:t})=>{const[n,l]=i.useState(()=>{const v=Pe();return r&&Object.entries(r).forEach(([k,A])=>{v[k]=!!A}),v}),[m,d]=i.useState("fill-missing"),y=e.length,C=y>0,B="text-xs sm:text-sm h-8 px-3 border rounded-md transition-colors",P="bg-primary text-primary-foreground border-primary",E="border-border text-foreground hover:bg-muted",x=i.useMemo(()=>Object.values(n).filter(Boolean).length,[n]),M=i.useCallback(v=>{t||l(k=>({...k,[v]:!k[v]}))},[t]),T=i.useCallback(v=>{t||l(k=>{const A={...k};return Object.keys(A).forEach(X=>{A[X]=v}),A})},[t]),H=i.useCallback(()=>{t||l(v=>{const k={...v};return Object.keys(k).forEach(A=>{k[A]=A==="cafe"||A==="almoco"}),k})},[t]),I=i.useCallback(async()=>{if(!(!C||t))try{await o(n,{mode:m})}catch(v){console.error("Erro ao aplicar template de refeições:",v)}},[C,t,o,n,m]),G=i.useCallback(()=>{t||a()},[t,a]);return s.jsxs(ae,{className:`group relative w-full h-fit bg-card text-card-foreground border border-border shadow-sm transition-all duration-300 hover:shadow-md hover:border-accent max-w-xl
        `,children:[s.jsx(Ee,{className:"",children:s.jsxs(ls,{className:"flex items-center gap-2 text-foreground",children:[s.jsx("span",{className:`
                  inline-flex items-center justify-center h-8 w-8 rounded-lg
                  bg-background text-primary ring-1 ring-border
                `,children:s.jsx(ds,{className:"h-5 w-5"})}),"Aplicar Refeições em Massa"]})}),s.jsxs(te,{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ze,{className:"text-sm font-medium text-foreground",children:"Modo de aplicação:"}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(K,{type:"button",variant:"outline",className:`${B} ${m==="fill-missing"?P:E}`,onClick:()=>d("fill-missing"),disabled:t,children:"Preencher onde está vazio"}),s.jsx(K,{type:"button",variant:"outline",className:`${B} ${m==="override"?P:E}`,onClick:()=>d("override"),disabled:t,children:"Sobrescrever tudo"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Selecionadas:"," ",s.jsx("strong",{className:"text-foreground",children:x})," de 4 refeições."]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ze,{className:"text-sm font-medium text-foreground",children:"Escolha as refeições:"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:Ne.map(v=>{const k=v.value;return s.jsx(Je,{meal:v,isSelected:n[k],onToggle:()=>M(k),disabled:t,compact:!0},v.value)})}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx(K,{type:"button",variant:"outline",size:"sm",onClick:()=>T(!0),disabled:t,className:"text-xs hover:bg-muted",children:"Todas"}),s.jsx(K,{type:"button",variant:"outline",size:"sm",onClick:()=>T(!1),disabled:t,className:"text-xs hover:bg-muted",children:"Nenhuma"}),s.jsx(K,{type:"button",variant:"outline",size:"sm",onClick:H,disabled:t,className:"text-xs hover:bg-muted",children:"Padrão Dias Úteis"})]})]}),s.jsxs("div",{className:"flex flex-row-reverse gap-4",children:[s.jsx(K,{variant:"outline",size:"sm",onClick:G,disabled:t,className:`
                    hover:bg-muted
                    focus-visible:ring-2 focus-visible:ring-ring
                    focus-visible:ring-offset-2 focus-visible:ring-offset-background
                  `,children:"Cancelar"}),s.jsx(K,{size:"sm",onClick:I,disabled:t||!C||x===0,className:`
                    bg-primary text-primary-foreground hover:bg-primary/90
                    focus-visible:ring-2 focus-visible:ring-ring
                    focus-visible:ring-offset-2 focus-visible:ring-offset-background
                    disabled:opacity-50 disabled:cursor-not-allowed
                  `,children:t?s.jsxs(s.Fragment,{children:[s.jsx(Re,{className:"h-4 w-4 animate-spin mr-2"}),"Aplicando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Aplicar a ",y," card",y!==1?"s":""]})})]})]})]})});js.displayName="BulkMealSelector";const ks=i.memo(({selections:e,dates:r,isLoading:o=!1})=>{const a=i.useMemo(()=>{const l=r.slice(0,7);let m=0,d=0;l.forEach(E=>{const x=e[E];if(x){const M=Object.values(x).filter(Boolean).length;M>0&&(d++,m+=M)}});let y=null;const C=["cafe","almoco","janta","ceia"];for(const E of r){const x=e[E];if(x){for(const M of C)if(x[M]){y={date:E,meal:M};break}if(y)break}}const B=l.length||1,P=Math.round(d/B*100);return{totalMealsNext7Days:m,daysWithMealsNext7Days:d,nextMeal:y,consideredDays:B,progressPct:P}},[e,r]),t=l=>{const[m,d,y]=l.split("-").map(Number);return new Date(m,d-1,y).toLocaleDateString("pt-BR",{weekday:"short",day:"2-digit",month:"2-digit"})},n=l=>({cafe:"Café",almoco:"Almoço",janta:"Janta",ceia:"Ceia"})[l]||l;return o?s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsx(ae,{className:"bg-card text-card-foreground border border-border border-l-4 border-l-primary/70",children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-9 w-9 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx($e,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Próxima Refeição"}),s.jsx(V,{className:"h-6 w-28 mt-1"}),s.jsx(V,{className:"h-4 w-20 mt-2"})]})]})})}),s.jsx(ae,{className:"bg-card text-card-foreground border border-border border-l-4 border-l-accent/70",children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-9 w-9 rounded-full bg-accent/10 flex items-center justify-center",children:s.jsx(Oe,{className:"h-5 w-5 text-accent"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Próximos 7 Dias"}),s.jsx(V,{className:"h-6 w-36 mt-1"}),s.jsx(V,{className:"h-2 w-full mt-3 rounded-full"}),s.jsx(V,{className:"h-4 w-24 mt-2"})]})]})})}),s.jsx(ae,{className:"bg-card text-card-foreground border border-border border-l-4 border-l-secondary/70",children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-9 w-9 rounded-full bg-secondary/10 flex items-center justify-center",children:s.jsx(Xe,{className:"h-5 w-5 text-secondary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),s.jsx(V,{className:"h-7 w-40 mt-2 rounded-full"})]})]})})})]})}):s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsx(ae,{className:"bg-card text-card-foreground border border-border border-l-4 border-l-primary hover:shadow-sm transition-shadow",children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-9 w-9 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx($e,{className:"h-5 w-5 text-primary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Próxima Refeição"}),a.nextMeal?s.jsxs("div",{className:"mt-0.5",children:[s.jsx("p",{className:"text-lg font-semibold text-foreground leading-tight",children:n(a.nextMeal.meal)}),s.jsx("p",{className:"text-sm text-muted-foreground leading-tight",children:t(a.nextMeal.date)})]}):s.jsxs("div",{className:"mt-0.5 flex items-center gap-2 text-muted-foreground",children:[s.jsx(er,{className:"h-4 w-4"}),s.jsx("p",{className:"text-sm font-medium",children:"Nenhuma refeição agendada"})]})]})]})})}),s.jsx(ae,{className:"bg-card text-card-foreground border border-border border-l-4 border-l-accent hover:shadow-sm transition-shadow",children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-9 w-9 rounded-full bg-accent/10 flex items-center justify-center",children:s.jsx(Oe,{className:"h-5 w-5 text-accent"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Próximos 7 Dias"}),s.jsxs("p",{className:"text-lg font-semibold text-foreground leading-tight",children:[a.totalMealsNext7Days," refeições"]}),s.jsxs("p",{className:"text-xs text-muted-foreground leading-tight",children:["em ",a.daysWithMealsNext7Days," de ",a.consideredDays," ","dias"]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"h-2 w-full rounded-full bg-muted overflow-hidden",children:s.jsx("div",{className:"h-full bg-accent rounded-full transition-all",style:{width:`${a.progressPct}%`},"aria-label":`Progresso: ${a.progressPct}%`})}),s.jsxs("div",{className:"mt-1.5 text-xs text-muted-foreground",children:[a.progressPct,"% dos dias com ao menos 1 refeição"]})]})]})]})})}),s.jsx(ae,{className:"bg-card text-card-foreground border border-border border-l-4 border-l-secondary hover:shadow-sm transition-shadow",children:s.jsx(te,{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-9 w-9 rounded-full bg-secondary/10 flex items-center justify-center",children:s.jsx(Xe,{className:"h-5 w-5 text-secondary"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),s.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[s.jsx(He,{variant:a.totalMealsNext7Days>0?"default":"secondary",className:"px-2.5 py-1",children:a.totalMealsNext7Days>0?s.jsxs("span",{className:"inline-flex items-center gap-1",children:[s.jsx(Ks,{className:"h-4 w-4"}),"Refeições Agendadas"]}):"Sem Refeições"}),a.totalMealsNext7Days>0&&s.jsxs("span",{className:"text-xs text-muted-foreground",children:[a.totalMealsNext7Days," no total"]})]})]})]})})})]})})});ks.displayName="SimplifiedMilitaryStats";const Cs=(e,r,o)=>e===1?r:o,Ur=e=>Cs(e,"alteração","alterações"),Wr=e=>Cs(e,"pendente","pendentes"),_e="sisub-pending",Ps=i.memo(({success:e,error:r,onClearMessages:o,pendingChanges:a,isSavingBatch:t,autoHideSuccessMs:n=6e3})=>{const l=a.length;return i.useEffect(()=>{if(!e)return;const m=`sisub-success-${Date.now()}`;ie.success(e,{id:m,duration:n,icon:s.jsx(Ge,{className:"h-4 w-4"})});const d=setTimeout(()=>o(),n);return()=>clearTimeout(d)},[e,n,o]),i.useEffect(()=>{if(!r)return;const m="sisub-error";ie.error(r,{id:m,duration:1e4,closeButton:!0,icon:s.jsx(cs,{className:"h-4 w-4"}),action:{label:"Fechar",onClick:()=>{o(),ie.dismiss(m)}}})},[r,o]),i.useEffect(()=>{if(l>0){const m=`${l} ${Ur(l)}`;t?ie(`Salvando ${m}...`,{id:_e,duration:1/0,icon:s.jsx(Re,{className:"h-4 w-4 animate-spin"})}):ie(`${m} ${Wr(l)} — salvamento automático em andamento`,{id:_e,duration:1/0,icon:s.jsx(Ys,{className:"h-4 w-4"})})}else ie.dismiss(_e)},[l,t]),null});Ps.displayName="UnifiedStatusToasts";const qr=i.lazy(()=>Ss(()=>Promise.resolve().then(()=>Vr),void 0)),Ye=(e,r,o)=>e===1?r:o,Jr=e=>Ye(e,"alteração","alterações"),Kr=e=>Ye(e,"card","cards"),Yr=e=>Ye(e,"dia útil","dias úteis"),Qr=(e,r,o)=>{const a=_s(e),t=zs(e),n=Object.values(o).filter(Boolean).length,l=Se(e,Me);return{formattedDate:a,dayOfWeek:t,selectedMealsCount:n,isDateNear:l,isToday:e===r}},Zr=e=>{const o=new Date(`${e}T00:00:00`).getDay();return o>=1&&o<=5};function Ba({}){return[{title:"Previsão SISUB"},{name:"description",content:"Faça sua previsão"}]}const Da=Ms(function(){const{success:r,error:o,isLoading:a,isRefetching:t,pendingChanges:n,isSavingBatch:l,selections:m,dayMessHalls:d,dates:y,todayString:C,setSuccess:B,setError:P,setPendingChanges:E,setSelections:x,setDayMessHalls:M,loadExistingForecasts:T,clearMessages:H,defaultMessHallId:I,setDefaultMessHallId:G,persistDefaultMessHallId:v}=lr(),{messHalls:k}=ns(),A=i.useMemo(()=>I?k.find(c=>String(c.id)===String(I))?.code??"":"",[I,k]),X=i.useCallback(p=>{const c=k.find(u=>u.code===p);c?.id!=null&&G(String(c.id))},[k,G]),b=i.useCallback(p=>{if(!p)return"";const c=k.find(u=>u.code===p);return c?.id!=null?String(c.id):""},[k]),L=i.useCallback(p=>{const c=d[p]||A||"";return b(c)||(I?String(I):"")},[d,A,I,b]),[pe,ee]=i.useState(!1),[W,oe]=i.useState(!1),[ce,q]=i.useState(!1),[J,U]=i.useState(!1),g=i.useMemo(()=>y.filter(p=>Zr(p)&&!Se(p,Me)),[y]),re=i.useMemo(()=>{const p=y.filter(u=>!d[u]),c=y.map(u=>({date:u,daySelections:m[u]||Pe(),dayMessHallCode:d[u]||A||""}));return{cardsWithoutMessHall:p,cardData:c}},[y,d,m,A]),be=i.useMemo(()=>re.cardData.map(({date:p,daySelections:c,dayMessHallCode:u})=>{const w=Qr(p,C,c);return{key:p,date:p,daySelections:c,dayMessHallId:u,defaultMessHallId:A,...w,isSaving:!1}}),[re.cardData,C,A]),ge=i.useCallback((p,c)=>{if(Se(p,Me))return;const u=L(p);if(!u){P("Defina seu rancho padrão antes de marcar refeições.");return}const S=!(m[p]?.[c]||!1);x(F=>{const _=F[p]??Pe();return{...F,[p]:{..._,[c]:S}}}),E(F=>{const _=F.findIndex(z=>z.date===p&&z.meal===c);if(_>=0){const z=[...F];return z[_]={date:p,meal:c,value:S,messHallId:u},z}return[...F,{date:p,meal:c,value:S,messHallId:u}]})},[m,L,x,E,P]),le=i.useCallback((p,c)=>{if(Se(p,Me))return;M(F=>({...F,[p]:c}));const u=m[p];if(!u)return;const w=b(c);if(!w)return;const S=Object.entries(u).filter(([,F])=>F).map(([F,_])=>({date:p,meal:F,value:_,messHallId:w}));S.length&&E(F=>[...F.filter(z=>z.date!==p),...S])},[m,M,E,b]),$=i.useCallback(()=>{T()},[T]),j=i.useCallback(()=>{ee(p=>!p)},[]),R=i.useCallback(()=>{ee(!1)},[]),Y=i.useCallback(async()=>{const{cardsWithoutMessHall:p}=re;if(p.length!==0)try{const c=I||b(A)||"";if(!c){P("Defina e salve um rancho padrão antes de aplicar aos cards.");return}const u={...d};p.forEach(S=>{u[S]=A}),M(u);const w=[];p.forEach(S=>{const F=m[S];F&&Object.entries(F).filter(([,_])=>_).forEach(([_,z])=>{w.push({date:S,meal:_,value:z,messHallId:String(c)})})}),w.length>0&&E(S=>[...S.filter(_=>!p.includes(_.date)),...w]),B(`Rancho padrão "${A}" aplicado a ${p.length} ${Kr(p.length)}!`),ee(!1)}catch(c){console.error("Erro ao aplicar rancho padrão:",c),P("Erro ao aplicar rancho padrão. Tente novamente.")}},[re,d,A,I,m,M,E,B,P,b]),D=i.useCallback(async(p,c)=>{const u=g;if(!u.length){q(!1);return}U(!0);try{const w=[],S={};if(u.forEach(z=>{const me=m[z]||Pe(),Z={...me};c.mode==="override"?Object.keys(Z).forEach(se=>{Z[se]=!!p[se]}):Object.keys(Z).forEach(se=>{p[se]&&(Z[se]=Z[se]||!0)});const ue=(d[z]&&d[z]!==""?d[z]:A)||"",Qe=b(ue)||(I?String(I):"");Object.keys(Z).forEach(se=>{if(Z[se]!==me[se]){if(!Qe)return;w.push({date:z,meal:se,value:Z[se],messHallId:Qe})}}),S[z]=Z}),w.length===0){B("Nenhuma alteração necessária para aplicar o template em dias úteis."),q(!1);return}x(z=>{const me={...z};return u.forEach(Z=>{me[Z]=S[Z]}),me}),E(z=>{const me=new Set(w.map(ue=>`${ue.date}|${String(ue.meal)}`));return[...z.filter(ue=>!me.has(`${ue.date}|${String(ue.meal)}`)),...w]});const F=`${u.length} ${Yr(u.length)}`,_=`${w.length} ${Jr(w.length)}`;B(`Template de refeições aplicado a ${F} no modo ${c.mode==="override"?"sobrescrever":"preencher"}: ${_}.`),q(!1)}catch(w){console.error("Erro ao aplicar template de refeições:",w),P("Erro ao aplicar template de refeições. Tente novamente.")}finally{U(!1)}},[g,m,d,A,I,x,E,B,P,b]),Q=i.useCallback(async()=>{oe(!0);try{await v(),await Y(),await T()}finally{oe(!1)}},[v,Y,T]);return s.jsxs("div",{className:"h-full container flex-col mx-auto px-4 sm:px-6 md:px-8 py-4 sm:py-6 space-y-6",children:[s.jsxs("header",{className:"flex flex-wrap items-center justify-between gap-3",children:[s.jsx("h1",{className:"text-lg sm:text-xl font-semibold",children:"Previsão SISUB"}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsxs(K,{variant:"outline",size:"sm",onClick:j,className:" hover:bg-orange-50 cursor-pointer","aria-label":"Definir rancho padrão",children:[s.jsx(is,{className:"h-4 w-4 mr-2"}),"Rancho Padrão"]}),s.jsxs(K,{variant:"outline",size:"sm",onClick:()=>q(!ce),disabled:a,className:" hover:bg-green-50 cursor-pointer","aria-label":"Aplicar refeições em massa",children:[s.jsx(ds,{className:"h-4 w-4 mr-2"}),"Refeições em Massa"]}),s.jsx(K,{variant:"outline",size:"sm",onClick:$,disabled:a||t,className:"cursor-pointer","aria-label":"Recarregar previsões",children:s.jsx(Qs,{className:`h-4 w-4 ${t?"animate-spin":""}`})})]})]}),s.jsxs("section",{className:"gap-8 flex flex-row w-full",children:[pe&&s.jsx(fs,{defaultMessHallCode:A,setDefaultMessHallCode:X,onApply:Q,onCancel:R,isApplying:W}),ce&&s.jsx(js,{targetDates:g,initialTemplate:{cafe:!0,almoco:!0},onApply:D,onCancel:()=>q(!1),isApplying:J})]}),s.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-[9999] pointer-events-none",children:s.jsx(Ps,{success:r,error:o,onClearMessages:H,pendingChanges:n,isSavingBatch:l,autoHideSuccessMs:6e3})}),s.jsx("section",{className:"w-full",children:s.jsx("div",{className:"p-4 sm:p-5",children:s.jsx("div",{className:"p-4 sm:p-5",children:s.jsx(ks,{selections:m,dates:y,isLoading:t})})})}),s.jsxs("section",{"aria-labelledby":"cards-title",children:[s.jsx("h2",{id:"cards-title",className:"sr-only",children:"Previsão por dia"}),s.jsx("div",{className:"flex flex-row columns-auto justify-center items-center w-full flex-wrap gap-8",role:"region","aria-label":"Lista de cards por dia",children:be.map(p=>s.jsx(i.Suspense,{fallback:s.jsx(De,{}),children:s.jsx("div",{className:"snap-center",children:s.jsx(qr,{...p,pendingChanges:n,onMealToggle:ge,onMessHallChange:le})})},p.key))})]})]})});export{Da as default,Ba as meta};
